import{A as j,i as u}from"./index-D6srn8b4.js";import{M as F}from"./MaterialService-C88B2Ujc.js";import{r as k,_ as z,l as y,k as t,i as s,w as l,T as H,f as _,g as n,j as g,p as Q,q as f,F as J,m as O,t as w,e as D,v as R,x as U}from"./index-DtvlJUON.js";import"./MaterialRepository-CkyeY5IP.js";import"./RepositoryInterface-TDgCEybl.js";const I=new F,W={components:{AppModal:j},setup(){const v=k([]),a=k(1),M=k(""),e="addmaterial",m=k({isDeleted:!1}),h=k(null);function b(o){h.value=o}async function i(){v.value=await I.allMaterial(m.value).filter(o=>M.value.trim()===""?!0:o.name.toLowerCase().includes(M.value.toLowerCase())).filter((o,d)=>d>=(a.value-1)*10&&d<a.value*10)}async function C(o){o.orderKey===m.value.orderKey&&(o.orderBy=m.value.orderBy==="asc"?"desc":"asc"),m.value={...m.value,...o},await i()}async function x(o){M.value=o,await i()}async function A(){m.value={isDeleted:!1},await i()}async function p(){a.value++,await i()}async function E(){a.value--,await i()}async function q(o){o<1&&(o=1),a.value=o,await i()}i();async function r(){const o=document.getElementById("material-name"),d=document.getElementById("material-quantity");if(!o||!d){u("Please fill all the fields",{type:"error"});return}if(!o.value||!d.value){u("Please fill all the fields",{type:"error"});return}if(isNaN(Number(d.value))){u("Please insert a valid number",{type:"error"});return}const P={quantity:Number(d.value),name:o.value,id:0,isDeleted:!1,initiativeId:0};try{await I.createMaterial(P)}catch(B){u(B.message,{type:"error"});return}document.getElementById("close-modal-"+e).click(),u("Material created",{type:"success"}),await q(1),await i()}async function N(o){try{await I.deleteMaterial(o),await i(),u("Material deleted",{type:"success"})}catch(d){u("Error deleting material: "+d.message,{type:"error"})}}async function G(){var L,K,V;const o=document.getElementById("material-name-edit"),d=document.getElementById("material-quantity-edit"),P=document.getElementById("material-delete-edit"),S=P?P.checked:!0,B={id:((L=h.value)==null?void 0:L.id)||0,...h.value,name:o.value||((K=h.value)==null?void 0:K.name)||"default",quantity:d.value||((V=h.value)==null?void 0:V.quantity)||"default",isDeleted:!S};if(!B.id){u("Error editing material: Material id not found",{type:"error"});return}try{await I.updateMaterial(B.id,B),await i(),u("Material edited",{type:"success"})}catch(T){u("Error editing material: "+T.message,{type:"error"});return}document.getElementById("close-modal-"+e+"-edit").click()}return{modalId:e,materialService:I,document,deleteMaterial:N,materials:v,createMaterial:r,nextPage:p,previousPage:E,setPage:q,page:a,setQuery:C,resetQuery:A,query:m,setSearch:x,setEditMaterial:b,editedMaterial:h,editMaterial:G}}},c=v=>(R("data-v-a1b20a81"),v=v(),U(),v),X={class:"intro"},Y={class:"bg-image h-100"},Z={class:"mask d-flex align-items-center h-100"},$={class:"container"},ee={class:"row justify-content-center"},te={class:"col-12"},ae={class:"d-flex align-items-center mb-3 gap-3 justify-content-between"},oe=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[t("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})],-1)),re={class:"card shadow-2-strong"},le={class:"card-body"},se={class:"table-responsive"},ie={class:"table table-borderless mb-0"},ne={scope:"col"},de=c(()=>t("p",{class:"p-0 m-0"},"Name",-1)),ce=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),ue=[ce],me={scope:"col"},ye=c(()=>t("p",{class:"p-0 m-0"},"Quantity",-1)),_e=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),ge=[_e],ve={scope:"col"},he=c(()=>t("p",{class:"p-0 m-0"},"Id",-1)),pe=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),fe=[pe],we={key:0,scope:"col"},be=["onClick"],Ce=["data-bs-target"],xe=["data-bs-target"],Be=["data-bs-target"],ke={key:0,class:"custom-row"},Ie=["onClick"],Me=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x text-white",viewBox:"0 0 16 16"},[t("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"})],-1)),qe=[Me],Pe={class:"container d-flex pt-4 justify-content-between"},De=c(()=>t("span",{"aria-hidden":"true"},"«",-1)),Ae=c(()=>t("span",{"aria-hidden":"true"},"»",-1)),Ee=c(()=>t("div",null,null,-1));function Ne(v,a,M,e,m,h){const b=_("CInputGroupText"),i=_("CFormInput"),C=_("CInputGroup"),x=_("CButton"),A=_("CButtonGroup"),p=_("CPaginationItem"),E=_("CPagination"),q=_("app-modal");return n(),y("section",X,[t("div",Y,[t("div",Z,[t("main",$,[t("div",ee,[t("div",te,[t("div",ae,[s(C,{class:"w-25"},{default:l(()=>[s(b,null,{default:l(()=>[oe]),_:1}),s(i,{onChange:a[0]||(a[0]=r=>e.setSearch(r.target.value)),placeholder:"Search","aria-label":"Search","aria-describedby":"search"})]),_:1}),s(A,{role:"group","aria-label":"Basic example"},{default:l(()=>[s(x,{color:"primary",active:!e.query.isDeleted,onClick:a[1]||(a[1]=r=>e.setQuery({isDeleted:!1}))},{default:l(()=>[g("Active")]),_:1},8,["active"]),s(x,{color:"primary",active:e.query.isDeleted,onClick:a[2]||(a[2]=r=>e.setQuery({isDeleted:!0}))},{default:l(()=>[g("Deleted")]),_:1},8,["active"])]),_:1})]),t("div",re,[t("div",le,[t("div",se,[s(H,{name:"fade"},{default:l(()=>[t("table",ie,[t("thead",null,[t("tr",null,[t("th",ne,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:a[3]||(a[3]=r=>e.setQuery({orderKey:"name",orderBy:"asc"}))},[de,(n(),y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:Q({transform:e.query.orderKey==="name"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},ue,4))])]),t("th",me,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:a[4]||(a[4]=r=>e.setQuery({orderKey:"quantity",orderBy:"asc"}))},[ye,(n(),y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:Q({transform:e.query.orderKey==="quantity"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},ge,4))])]),t("th",ve,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:a[5]||(a[5]=r=>e.setQuery({orderKey:"id",orderBy:"asc"}))},[he,(n(),y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:Q({transform:e.query.orderKey==="id"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},fe,4))])]),e.query.isDeleted?f("",!0):(n(),y("th",we,"Delete"))])]),t("tbody",null,[(n(!0),y(J,null,O(e.materials,r=>(n(),y("tr",{key:r.id,onClick:N=>e.setEditMaterial(r),class:"table-row custom-row-parent"},[t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},w(r.name),9,Ce),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},w(r.quantity),9,xe),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},w(r.id),9,Be),r.isDeleted?f("",!0):(n(),y("td",ke,[t("button",{type:"button",class:"btn btn-danger btn-sm px-3",onClick:N=>e.deleteMaterial(r.id)},qe,8,Ie)]))],8,be))),128))])])]),_:1})])])])])]),t("div",Pe,[s(E,{"aria-label":"Page navigation example"},{default:l(()=>[e.page>1?(n(),D(p,{key:0,"aria-label":"Previous",style:{cursor:"pointer"},onClick:e.previousPage},{default:l(()=>[De]),_:1},8,["onClick"])):f("",!0),s(p,{active:""},{default:l(()=>[g(w(e.page),1)]),_:1}),e.materials.length==10?(n(),D(p,{key:1,onClick:a[6]||(a[6]=r=>e.setPage(e.page+1)),style:{cursor:"pointer"}},{default:l(()=>[g(w(e.page+1),1)]),_:1})):f("",!0),e.materials.length==10?(n(),D(p,{key:2,onClick:a[7]||(a[7]=r=>e.setPage(e.page+2)),style:{cursor:"pointer"}},{default:l(()=>[g(w(e.page+2),1)]),_:1})):f("",!0),e.materials.length==10?(n(),D(p,{key:3,"aria-label":"Next",onClick:e.nextPage,style:{cursor:"pointer"}},{default:l(()=>[Ae]),_:1},8,["onClick"])):f("",!0)]),_:1}),s(x,{"data-bs-toggle":"modal",type:"button","data-bs-target":"#"+e.modalId,color:"primary"},{default:l(()=>[g(" Add new material ")]),_:1},8,["data-bs-target"]),s(q,{targetId:e.modalId,title:"Add Material",description:"Create a new material",saveAction:e.createMaterial},{default:l(()=>[s(C,{class:"mb-3"},{default:l(()=>[s(b,null,{default:l(()=>[g("Name")]),_:1}),s(i,{id:"material-name",placeholder:"Name","aria-label":"Name","aria-describedby":"basic-addon1"})]),_:1}),s(C,{class:"mb-3"},{default:l(()=>[s(b,null,{default:l(()=>[g("Quantity (units)")]),_:1}),s(i,{id:"material-quantity",placeholder:"Quantity","aria-label":"Quantity","aria-describedby":"basic-addon1"})]),_:1})]),_:1},8,["targetId","saveAction"])]),Ee])])])])}const Te=z(W,[["render",Ne],["__scopeId","data-v-a1b20a81"]]);export{Te as default};
