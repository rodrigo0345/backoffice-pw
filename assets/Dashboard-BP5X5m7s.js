import{W as y,a as x}from"./WidgetsStatsTypeD-B6b2MsSF.js";import{I as S}from"./InitiativeService-DgwwNRpE.js";import{S as w}from"./SuggestionService-v8Bd-oI4.js";import{U as C}from"./UserService-o9p5zFJ_.js";import{_ as A,c as l,a as t,t as i,F as k,r as D,o as r,n as I}from"./index-CqBfKhJj.js";import"./index-s0huZJH-.js";import"./RepositoryInterface-TDgCEybl.js";import"./FoodModelRepository-EukNaaBv.js";import"./MaterialRepository-CkyeY5IP.js";import"./config-Dvl3g2xv.js";const m=new C,a=new w,d=new S,E={name:"Dashboard",components:{WidgetsStatsA:y,WidgetsStatsD:x},methods:{async loginWithGoogle(){const c=await m.loginWithGoogle(window);console.log({user:c})}},setup(){const c=d.getAllInitiatives({}).filter(s=>s.isDeleted===!1).length,_=m.listUsers({}).filter(s=>s.isDeleted===!1).length,g=a.getAllSuggestions({status:"Pending"}).length,e=a.getAllSuggestions({}).length,h=a.getAllSuggestions({status:"Approved"}).length,p=e===0?0:h/e,u=d.getAllInitiatives({}).filter(s=>s.isDeleted===!1&&new Date(s.date).getTime()>new Date().getTime()).map(s=>{const n=a.getAllSuggestions({id:s.sugestionId})[0];if(!n)return;const v=d.getCalculatedCost(s.id),f=n.budget,b=d.getRiskLevel(s.id);return{event:s,suggestion:n,percentageCost:v/f,risk:b}});return{activeStaffCount:_,activeInitiativesCount:c,pendentSuggestionsCount:g,acceptanceRate:p,activeEvents:u}}},F={class:"container my-5"},R={class:"mb-4"},B={class:"row text-center"},W={class:"col-12 col-md-6 col-xl-3 mb-3"},N={class:"card shadow-sm h-100",style:{"border-left":"5px solid #00bdfe"}},T={class:"card-body"},U=t("h5",{class:"card-title text-primary"},"Active Staff",-1),G={class:"card-text display-4"},L={class:"col-12 col-md-6 col-xl-3 mb-3"},P={class:"card shadow-sm h-100",style:{"border-left":"5px solid #00bdfe"}},z={class:"card-body"},V=t("h5",{class:"card-title text-primary"},"Events",-1),j={class:"card-text display-4"},q={class:"col-12 col-md-6 col-xl-3 mb-3"},H={class:"card shadow-sm h-100",style:{"border-left":"5px solid #00bdfe"}},J={class:"card-body"},K=t("h5",{class:"card-title text-primary"},"Suggestions",-1),M={class:"card-text display-4"},O={class:"col-12 col-md-6 col-xl-3 mb-3"},Q={class:"card shadow-sm h-100",style:{"border-left":"5px solid #00bdfe"}},X={class:"card-body"},Y=t("h5",{class:"card-title text-primary"},"Acceptance Rate",-1),Z={class:"card-text display-4"},$={class:"card shadow-sm"},tt={class:"card-body"},st=t("h5",{class:"card-title text-primary"},"Active Events",-1),et={class:"table"},ot=t("thead",{class:"thead-dark"},[t("tr",null,[t("th",{scope:"col"},"Event"),t("th",{scope:"col"},"Risk"),t("th",{scope:"col"},"Budget"),t("th",{scope:"col"},"Percentage")])],-1),it={scope:"row"},ct={class:"progress"},at=["aria-valuenow"];function dt(c,_,g,e,h,p){return r(),l("main",F,[t("header",R,[t("div",B,[t("div",W,[t("div",N,[t("div",T,[U,t("p",G,i(e.activeStaffCount),1)])])]),t("div",L,[t("div",P,[t("div",z,[V,t("p",j,i(e.activeInitiativesCount),1)])])]),t("div",q,[t("div",H,[t("div",J,[K,t("p",M,i(e.pendentSuggestionsCount),1)])])]),t("div",O,[t("div",Q,[t("div",X,[Y,t("p",Z,i((e.acceptanceRate*100).toFixed(2))+"%",1)])])])])]),t("div",$,[t("div",tt,[st,t("table",et,[ot,t("tbody",null,[(r(!0),l(k,null,D(e.activeEvents,o=>(r(),l("tr",{key:o.event.id},[t("td",it,i(o.event.eventType),1),t("td",null,i(Number(o.risk).toFixed(2))+"/5.00",1),t("td",null,i(Number(o.suggestion.budget).toFixed(2))+"â‚¬",1),t("td",null,[t("div",ct,[t("div",{class:"progress-bar bg-primary",role:"progressbar",style:I({width:o.percentageCost*100+"%"}),"aria-valuenow":o.percentageCost*100,"aria-valuemin":"0","aria-valuemax":"100"},i((o.percentageCost*100).toFixed(2))+"% ",13,at)])])]))),128))])])])])])}const ft=A(E,[["render",dt]]);export{ft as default};
