class d{order(e,t){if(!t.orderKey)return e;const n=t.orderKey;return e.sort((s,i)=>{try{const u=Number(s[n]),r=Number(i[n]);if(isNaN(u)||isNaN(r))throw new Error("Invalid order key");return t.orderBy==="asc"?u-r:r-u}catch{const r=String(s[n]),o=String(i[n]);return t.orderBy==="asc"?r.localeCompare(o):o.localeCompare(r)}})}auxAll(e,t){const n=[];for(let s=0;s<e.length;s++){const i=e.key(s);if(i!=null&&i.includes(t)){const u=e.getItem(i),r=JSON.parse(u);r.id=Number(r.id),n.push(r)}}return n}create(e,t,n,s){e.id=t.getItem(s)??1;const i=Number(e.id)+1;return t.setItem(s,i.toString()),t.setItem(n+String(e.id),JSON.stringify(e)),e}update(e,t,n,s){return n.getItem(s+String(e))?(n.setItem(s+String(e),JSON.stringify(t)),t):null}delete(e,t,n){const s=t.getItem(n+String(e));if(!s)return!1;const i=JSON.parse(s);return i.isDeleted?!1:(i.isDeleted=!0,t.setItem(n+String(e),JSON.stringify(i)),!0)}find(e,t,n){return this.auxAll(t,n).filter(i=>{let u=!0;for(const r in e)e[r]!==void 0&&e[r]!=i[r]&&(u=!1);return u})[0]||null}all(e,t,n){const s=this.auxAll(t,n).filter(i=>{let u=!0;for(const r in e)r==="orderKey"||r==="orderBy"||e[r]!==void 0&&e[r]!=i[r]&&(u=!1);return u});return this.order(s,e)}}export{d as R};
