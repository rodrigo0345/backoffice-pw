import{A as T,i as g}from"./index-D6srn8b4.js";import{F as z}from"./FoodService-CMpHdTPP.js";import{r as I,_ as H,l as v,k as t,i as a,w as d,p as N,q as w,F as J,m as O,f as y,g as n,j as u,t as k,e as P,v as U,x as W}from"./index-DtvlJUON.js";import"./FoodModelRepository-EukNaaBv.js";import"./RepositoryInterface-TDgCEybl.js";const A=new z,X={components:{AppModal:T},setup(){const p=I([]),l=I(1),E=I(""),e="addfood",h=I({isDeleted:!1}),m=I(null);function _(o){m.value=o}async function i(){p.value=await A.listFood(h.value).filter(o=>E.value.trim()===""?!0:o.name.toLowerCase().includes(E.value)).filter((o,s)=>s>=(l.value-1)*10&&s<l.value*10)}async function f(o){o.orderKey===h.value.orderKey&&(o.orderBy=h.value.orderBy==="asc"?"desc":"asc"),h.value={...h.value,...o},await i()}async function C(o){E.value=o,await i()}async function S(){h.value={isDeleted:!1},await i()}async function b(){l.value++,await i()}async function K(){l.value--,await i()}async function x(o){o<1&&(o=1),l.value=o,await i()}i();async function L(){const o=document.getElementById("food-name"),s=document.getElementById("food-price"),B=document.getElementById("food-risk");if(!o||!s||!B){g("Please fill all the fields",{type:"error"});return}if(!o.value||!s.value||!B.value){g("Please fill all the fields",{type:"error"});return}const q={name:o.value,risk:Number(B.value),id:0,price:Number(s.value),isDeleted:!1};try{await A.createFood(q)}catch(F){g(F.message,{type:"error"});return}document.getElementById("close-modal-"+e).click(),g("Food created",{type:"success"}),await x(1),await i()}async function D(o){try{await A.deleteFood(o),await i(),g("Food deleted",{type:"success"})}catch(s){g("Error deleting food: "+s.message,{type:"error"})}}async function r(){var V,Q,G,R;const o=document.getElementById("food-name-edit"),s=document.getElementById("food-risk-edit"),B=document.getElementById("food-price-edit"),q=document.getElementById("food-delete-edit");console.log({editedFood:m});const M=q?q.checked:!0,F={id:((V=m.value)==null?void 0:V.id)||0,...m.value,name:o.value||((Q=m.value)==null?void 0:Q.name)||"default",risk:s.value||((G=m.value)==null?void 0:G.risk)||"default",price:B.value||((R=m.value)==null?void 0:R.price)||"default",isDeleted:!M};if(!F.id){g("Error editing food: Food id not found",{type:"error"});return}try{await A.updateFood(F.id,F),await i(),g("Food edited",{type:"success"})}catch(j){g("Error editing food: "+j.message,{type:"error"});return}document.getElementById("close-modal-"+e+"-edit").click()}return{modalId:"addfood",foodService:A,document,deleteFood:D,foods:p,createFood:L,nextPage:b,previousPage:K,setPage:x,page:l,setQuery:f,resetQuery:S,query:h,setSearch:C,setEditFood:_,editedFood:m,editFood:r}}},c=p=>(U("data-v-e089cfaa"),p=p(),W(),p),Y={class:"intro"},Z={class:"bg-image h-100"},$={class:"mask d-flex align-items-center h-100"},ee={class:"container"},te={class:"row justify-content-center"},oe={class:"col-12"},ae={class:"d-flex align-items-center mb-3 gap-3 justify-content-between"},de=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[t("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})],-1)),le={class:"card shadow-2-strong"},re={class:"card-body"},se={class:"table-responsive"},ie={class:"table table-borderless mb-0"},ne={scope:"col"},ce=c(()=>t("p",{class:"p-0 m-0"},"Name",-1)),ue=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),me=[ue],_e={scope:"col"},fe=c(()=>t("p",{class:"p-0 m-0"},"Price",-1)),ge=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),ve=[ge],ye={scope:"col"},he=c(()=>t("p",{class:"p-0 m-0"},"Risk",-1)),pe=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),be=[pe],we={scope:"col"},ke=c(()=>t("p",{class:"p-0 m-0"},"Id",-1)),Ce=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),xe=[Ce],Be={key:0,scope:"col"},Fe=["onClick"],Ie=["data-bs-target"],Pe=["data-bs-target"],Ae=["data-bs-target"],Ee=["data-bs-target"],De={key:0,class:"custom-row"},qe=["onClick"],Ne=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x text-white",viewBox:"0 0 16 16"},[t("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"})],-1)),Se=[Ne],Ke={class:"container d-flex pt-4 justify-content-between"},Le=c(()=>t("span",{"aria-hidden":"true"},"«",-1)),Me=c(()=>t("span",{"aria-hidden":"true"},"»",-1)),Ve=c(()=>t("div",null,null,-1));function Qe(p,l,E,e,h,m){var D;const _=y("CInputGroupText"),i=y("CFormInput"),f=y("CInputGroup"),C=y("CButton"),S=y("CButtonGroup"),b=y("CPaginationItem"),K=y("CPagination"),x=y("app-modal"),L=y("CFormCheck");return n(),v("section",Y,[t("div",Z,[t("div",$,[t("main",ee,[t("div",te,[t("div",oe,[t("div",ae,[a(f,{class:"w-25"},{default:d(()=>[a(_,null,{default:d(()=>[de]),_:1}),a(i,{onChange:l[0]||(l[0]=r=>e.setSearch(r.target.value)),placeholder:"Search","aria-label":"Search","aria-describedby":"search"})]),_:1}),a(S,{role:"group","aria-label":"Basic example"},{default:d(()=>[a(C,{color:"primary",active:!e.query.isDeleted,onClick:l[1]||(l[1]=r=>e.setQuery({isDeleted:!1}))},{default:d(()=>[u("Active")]),_:1},8,["active"]),a(C,{color:"primary",active:e.query.isDeleted,onClick:l[2]||(l[2]=r=>e.setQuery({isDeleted:!0}))},{default:d(()=>[u("Deleted")]),_:1},8,["active"])]),_:1})]),t("div",le,[t("div",re,[t("div",se,[t("table",ie,[t("thead",null,[t("tr",null,[t("th",ne,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:l[3]||(l[3]=r=>e.setQuery({orderKey:"name",orderBy:"asc"}))},[ce,(n(),v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:N({transform:e.query.orderKey==="name"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},me,4))])]),t("th",_e,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:l[4]||(l[4]=r=>e.setQuery({orderKey:"price",orderBy:"asc"}))},[fe,(n(),v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:N({transform:e.query.orderKey==="price"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},ve,4))])]),t("th",ye,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:l[5]||(l[5]=r=>e.setQuery({orderKey:"risk",orderBy:"asc"}))},[he,(n(),v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:N({transform:e.query.orderKey==="risk"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},be,4))])]),t("th",we,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:l[6]||(l[6]=r=>e.setQuery({orderKey:"id",orderBy:"asc"}))},[ke,(n(),v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:N({transform:e.query.orderKey==="id"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},xe,4))])]),e.query.isDeleted?w("",!0):(n(),v("th",Be,"Delete"))])]),t("tbody",null,[(n(!0),v(J,null,O(e.foods,r=>(n(),v("tr",{key:r.id,onClick:o=>e.setEditFood(r),class:"table-row custom-row-parent"},[t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},k(r.name),9,Ie),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},k(r.price),9,Pe),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},k(r.risk),9,Ae),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},k(r.id),9,Ee),r.isDeleted?w("",!0):(n(),v("td",De,[t("button",{type:"button",class:"btn btn-danger btn-sm px-3",onClick:o=>e.deleteFood(r.id)},Se,8,qe)]))],8,Fe))),128))])])])])])])]),t("div",Ke,[a(K,{"aria-label":"Page navigation example"},{default:d(()=>[e.page>1?(n(),P(b,{key:0,"aria-label":"Previous",style:{cursor:"pointer"},onClick:e.previousPage},{default:d(()=>[Le]),_:1},8,["onClick"])):w("",!0),a(b,{active:""},{default:d(()=>[u(k(e.page),1)]),_:1}),e.foods.length==10?(n(),P(b,{key:1,onClick:l[7]||(l[7]=r=>e.setPage(e.page+1)),style:{cursor:"pointer"}},{default:d(()=>[u(k(e.page+1),1)]),_:1})):w("",!0),e.foods.length==10?(n(),P(b,{key:2,onClick:l[8]||(l[8]=r=>e.setPage(e.page+2)),style:{cursor:"pointer"}},{default:d(()=>[u(k(e.page+2),1)]),_:1})):w("",!0),e.foods.length==10?(n(),P(b,{key:3,"aria-label":"Next",onClick:e.nextPage,style:{cursor:"pointer"}},{default:d(()=>[Me]),_:1},8,["onClick"])):w("",!0)]),_:1}),a(C,{"data-bs-toggle":"modal",type:"button","data-bs-target":"#"+e.modalId,color:"primary"},{default:d(()=>[u(" Add new food ")]),_:1},8,["data-bs-target"]),a(x,{targetId:e.modalId,title:"Add Food",description:"Create a new food",saveAction:e.createFood},{default:d(()=>[a(f,{class:"mb-3"},{default:d(()=>[a(_,null,{default:d(()=>[u("Name")]),_:1}),a(i,{id:"food-name",placeholder:"Name","aria-label":"Name","aria-describedby":"basic-addon1"})]),_:1}),a(f,{class:"mb-3"},{default:d(()=>[a(_,null,{default:d(()=>[u("Price (€)")]),_:1}),a(i,{id:"food-price",placeholder:"20€","aria-label":"Price","aria-describedby":"basic-addon1"})]),_:1}),a(f,{class:"mb-3"},{default:d(()=>[a(_,null,{default:d(()=>[u("Risk (0 - 5)")]),_:1}),a(i,{id:"food-risk",placeholder:"3.2","aria-label":"Risk","aria-describedby":"basic-addon1"})]),_:1})]),_:1},8,["targetId","saveAction"])]),Ve])]),a(x,{targetId:e.modalId+"-edit",title:(D=e.editedFood)==null?void 0:D.name,description:"Edit food",saveAction:e.editFood},{default:d(()=>{var r;return[a(f,{class:"mb-3"},{default:d(()=>{var o,s;return[a(_,null,{default:d(()=>[u(" Name ")]),_:1}),a(i,{id:"food-name-edit",placeholder:(o=e.editedFood)==null?void 0:o.name,"aria-label":"Name","aria-describedby":"basic-addon1",value:(s=e.editedFood)==null?void 0:s.name},null,8,["placeholder","value"])]}),_:1}),a(f,{class:"mb-3"},{default:d(()=>{var o,s;return[a(_,null,{default:d(()=>[u("Price (€)")]),_:1}),a(i,{id:"food-price-edit",placeholder:(o=e.editedFood)==null?void 0:o.price,"aria-label":"Price","aria-describedby":"basic-addon1",value:(s=e.editedFood)==null?void 0:s.price},null,8,["placeholder","value"])]}),_:1}),a(f,{class:"mb-3"},{default:d(()=>{var o,s;return[a(_,null,{default:d(()=>[u("Risk (0 - 5)")]),_:1}),a(i,{id:"food-risk-edit",placeholder:(o=e.editedFood)==null?void 0:o.risk,"aria-label":"Risk","aria-describedby":"basic-addon1",value:(s=e.editedFood)==null?void 0:s.risk},null,8,["placeholder","value"])]}),_:1}),(r=e.editedFood)!=null&&r.isDeleted?(n(),P(L,{key:0,id:"food-delete-edit",label:"Reactivate food"})):w("",!0)]}),_:1},8,["targetId","title","saveAction"])])])}const Je=H(X,[["render",Qe],["__scopeId","data-v-e089cfaa"]]);export{Je as default};
