import{A as G}from"./index-D_r6u122.js";import{M as T}from"./MaterialRepository-CkyeY5IP.js";import{i as u}from"./index-xEShUyOC.js";import{b as q,_ as j,c as g,a as t,d as l,w as i,T as z,e as _,o as s,f as m,n as S,g as M,F as H,r as J,t as x,h as N,p as O,i as U}from"./index-CqBfKhJj.js";import"./RepositoryInterface-TDgCEybl.js";class W{constructor(){this.materialRepository=new T}createMaterial(a){if(isNaN(Number(a.quantity)))throw new Error("Invalid material quantity. Quantity must be a number.");return this.materialRepository.create(a)}updateMaterial(a,f){if(isNaN(Number(f.quantity)))throw new Error("Invalid material quantity. Quantity must be a number.");return this.materialRepository.update(a,f)}deleteMaterial(a){return this.materialRepository.delete(a)}findMaterial(a){return this.materialRepository.find(a)}allMaterial(a){return this.materialRepository.all(a)}}const E=new W,X={components:{AppModal:G},setup(){const h=q([]),a=q(1),f=q(""),e="addmaterial",v=q({isDeleted:!1}),p=q(null);function b(r){p.value=r}async function n(){h.value=await E.allMaterial(v.value).filter(r=>f.value.trim()===""?!0:r.name.toLowerCase().includes(f.value.toLowerCase())).filter((r,d)=>d>=(a.value-1)*10&&d<a.value*10)}async function w(r){r.orderKey===v.value.orderKey&&(r.orderBy=v.value.orderBy==="asc"?"desc":"asc"),v.value={...v.value,...r},await n()}async function I(r){f.value=r,await n()}async function A(){v.value={isDeleted:!1},await n()}async function C(){a.value++,await n()}async function D(){a.value--,await n()}async function k(r){r<1&&(r=1),a.value=r,await n()}n();async function Q(){const r=document.getElementById("material-name"),d=document.getElementById("material-quantity");if(!r||!d){u("Please fill all the fields",{type:"error"});return}if(!r.value||!d.value){u("Please fill all the fields",{type:"error"});return}if(isNaN(Number(d.value))){u("Please insert a valid number",{type:"error"});return}const P={quantity:Number(d.value),name:r.value,id:0,isDeleted:!1};try{await E.createMaterial(P)}catch(B){u(B.message,{type:"error"});return}document.getElementById("close-modal-"+e).click(),u("Material created",{type:"success"}),await k(1),await n()}async function o(r){try{await E.deleteMaterial(r),await n(),u("Material deleted",{type:"success"})}catch(d){u("Error deleting material: "+d.message,{type:"error"})}}async function y(){var K,R,V;const r=document.getElementById("material-name-edit"),d=document.getElementById("material-quantity-edit"),P=document.getElementById("material-delete-edit"),L=P?P.checked:!0,B={id:((K=p.value)==null?void 0:K.id)||0,...p.value,name:r.value||((R=p.value)==null?void 0:R.name)||"default",quantity:d.value||((V=p.value)==null?void 0:V.quantity)||"default",isDeleted:!L};if(!B.id){u("Error editing material: Material id not found",{type:"error"});return}try{await E.updateMaterial(B.id,B),await n(),u("Material edited",{type:"success"})}catch(F){u("Error editing material: "+F.message,{type:"error"});return}document.getElementById("close-modal-"+e+"-edit").click()}return{modalId:e,materialService:E,document,deleteMaterial:o,materials:h,createMaterial:Q,nextPage:C,previousPage:D,setPage:k,page:a,setQuery:w,resetQuery:A,query:v,setSearch:I,setEditMaterial:b,editedMaterial:p,editMaterial:y}}},c=h=>(O("data-v-97694cc5"),h=h(),U(),h),Y={class:"intro"},Z={class:"bg-image h-100"},$={class:"mask d-flex align-items-center h-100"},ee={class:"container"},te={class:"row justify-content-center"},ae={class:"col-12"},re={class:"d-flex align-items-center mb-3 gap-3 justify-content-between"},le=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[t("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})],-1)),ie={class:"card shadow-2-strong"},oe={class:"card-body"},ne={class:"table-responsive"},se={class:"table table-borderless mb-0"},de={scope:"col"},ce=c(()=>t("p",{class:"p-0 m-0"},"Name",-1)),ue=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),me=[ue],ye={scope:"col"},_e=c(()=>t("p",{class:"p-0 m-0"},"Quantity",-1)),he=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),ve=[he],ge={scope:"col"},fe=c(()=>t("p",{class:"p-0 m-0"},"Id",-1)),pe=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),be=[pe],we={key:0,scope:"col"},Ce=["onClick"],Me=["data-bs-target"],xe=["data-bs-target"],Ie=["data-bs-target"],ke={key:0,class:"custom-row"},Be=["onClick"],qe=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x text-white",viewBox:"0 0 16 16"},[t("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"})],-1)),Ne=[qe],Ee={class:"container d-flex pt-4 justify-content-between"},Pe=c(()=>t("span",{"aria-hidden":"true"},"«",-1)),Ae=c(()=>t("span",{"aria-hidden":"true"},"»",-1)),De=c(()=>t("div",null,null,-1));function Qe(h,a,f,e,v,p){const b=_("CInputGroupText"),n=_("CFormInput"),w=_("CInputGroup"),I=_("CButton"),A=_("CButtonGroup"),C=_("CPaginationItem"),D=_("CPagination"),k=_("app-modal"),Q=_("CFormCheck");return s(),g("section",Y,[t("div",Z,[t("div",$,[t("main",ee,[t("div",te,[t("div",ae,[t("div",re,[l(w,{class:"w-25"},{default:i(()=>[l(b,null,{default:i(()=>[le]),_:1}),l(n,{onChange:a[0]||(a[0]=o=>e.setSearch(o.target.value)),placeholder:"Search","aria-label":"Search","aria-describedby":"search"})]),_:1}),l(A,{role:"group","aria-label":"Basic example"},{default:i(()=>[l(I,{color:"primary",active:!e.query.isDeleted,onClick:a[1]||(a[1]=o=>e.setQuery({isDeleted:!1}))},{default:i(()=>[m("Active")]),_:1},8,["active"]),l(I,{color:"primary",active:e.query.isDeleted,onClick:a[2]||(a[2]=o=>e.setQuery({isDeleted:!0}))},{default:i(()=>[m("Deleted")]),_:1},8,["active"])]),_:1})]),t("div",ie,[t("div",oe,[t("div",ne,[l(z,{name:"fade"},{default:i(()=>[t("table",se,[t("thead",null,[t("tr",null,[t("th",de,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:a[3]||(a[3]=o=>e.setQuery({orderKey:"name",orderBy:"asc"}))},[ce,(s(),g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:S({transform:e.query.orderKey==="name"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},me,4))])]),t("th",ye,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:a[4]||(a[4]=o=>e.setQuery({orderKey:"quantity",orderBy:"asc"}))},[_e,(s(),g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:S({transform:e.query.orderKey==="quantity"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},ve,4))])]),t("th",ge,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:a[5]||(a[5]=o=>e.setQuery({orderKey:"id",orderBy:"asc"}))},[fe,(s(),g("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:S({transform:e.query.orderKey==="id"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},be,4))])]),e.query.isDeleted?M("",!0):(s(),g("th",we,"Delete"))])]),t("tbody",null,[(s(!0),g(H,null,J(e.materials,o=>(s(),g("tr",{key:o.id,onClick:y=>e.setEditMaterial(o),class:"table-row custom-row-parent"},[t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},x(o.name),9,Me),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},x(o.quantity),9,xe),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},x(o.id),9,Ie),o.isDeleted?M("",!0):(s(),g("td",ke,[t("button",{type:"button",class:"btn btn-danger btn-sm px-3",onClick:y=>e.deleteMaterial(o.id)},Ne,8,Be)]))],8,Ce))),128))])])]),_:1})])])])])]),t("div",Ee,[l(D,{"aria-label":"Page navigation example"},{default:i(()=>[e.page>1?(s(),N(C,{key:0,"aria-label":"Previous",style:{cursor:"pointer"},onClick:e.previousPage},{default:i(()=>[Pe]),_:1},8,["onClick"])):M("",!0),l(C,{active:""},{default:i(()=>[m(x(e.page),1)]),_:1}),e.materials.length==10?(s(),N(C,{key:1,onClick:a[6]||(a[6]=o=>e.setPage(e.page+1)),style:{cursor:"pointer"}},{default:i(()=>[m(x(e.page+1),1)]),_:1})):M("",!0),e.materials.length==10?(s(),N(C,{key:2,onClick:a[7]||(a[7]=o=>e.setPage(e.page+2)),style:{cursor:"pointer"}},{default:i(()=>[m(x(e.page+2),1)]),_:1})):M("",!0),e.materials.length==10?(s(),N(C,{key:3,"aria-label":"Next",onClick:e.nextPage,style:{cursor:"pointer"}},{default:i(()=>[Ae]),_:1},8,["onClick"])):M("",!0)]),_:1}),l(I,{"data-bs-toggle":"modal",type:"button","data-bs-target":"#"+e.modalId,color:"primary"},{default:i(()=>[m(" Add new material ")]),_:1},8,["data-bs-target"]),l(k,{targetId:e.modalId,title:"Add Material",description:"Create a new material",saveAction:e.createMaterial},{default:i(()=>[l(w,{class:"mb-3"},{default:i(()=>[l(b,null,{default:i(()=>[m("Name")]),_:1}),l(n,{id:"material-name",placeholder:"Name","aria-label":"Name","aria-describedby":"basic-addon1"})]),_:1}),l(w,{class:"mb-3"},{default:i(()=>[l(b,null,{default:i(()=>[m("Quantity (units)")]),_:1}),l(n,{id:"material-quantity",placeholder:"Quantity","aria-label":"Quantity","aria-describedby":"basic-addon1"})]),_:1})]),_:1},8,["targetId","saveAction"])]),De])]),l(k,{targetId:e.modalId+"-edit",title:"Material",description:"Edit material",saveAction:e.editMaterial},{default:i(()=>{var o;return[l(w,{class:"mb-3"},{default:i(()=>{var y,r;return[l(b,null,{default:i(()=>[m(" Name ")]),_:1}),l(n,{id:"material-name-edit",placeholder:(y=e.editedMaterial)==null?void 0:y.name,"aria-label":"Name","aria-describedby":"basic-addon1",value:(r=e.editedMaterial)==null?void 0:r.name},null,8,["placeholder","value"])]}),_:1}),l(w,{class:"mb-3"},{default:i(()=>{var y,r;return[l(b,null,{default:i(()=>[m("Quantity (units)")]),_:1}),l(n,{id:"material-quantity-edit",placeholder:(y=e.editedMaterial)==null?void 0:y.quantity,"aria-label":"Quantity","aria-describedby":"basic-addon1",value:(r=e.editedMaterial)==null?void 0:r.quantity},null,8,["placeholder","value"])]}),_:1}),(o=e.editedMaterial)!=null&&o.isDeleted?(s(),N(Q,{key:0,id:"material-delete-edit",label:"Reactivate material"})):M("",!0)]}),_:1},8,["targetId","saveAction"])])])}const Ge=j(X,[["render",Qe],["__scopeId","data-v-97694cc5"]]);export{Ge as default};
