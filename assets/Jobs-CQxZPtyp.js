import{A as F,i as u}from"./index-T0QmJW5x.js";import{U as Q}from"./UserService-DZkKJJEp.js";import{r as J,_ as G,l as v,k as t,i as a,w as s,T,f as _,g as d,j as m,p as q,q as C,F as U,m as z,t as x,e as j,v as R,x as O}from"./index-C3C4sA69.js";import"./RepositoryInterface-TDgCEybl.js";const A=new Q,W={components:{AppModal:F},setup(){const y=J([]),r=J(1),k=J(""),e="addjob",g=J({isDeleted:!1}),h=J(null);function f(o){h.value=o}async function n(){y.value=A.getAllAvailableJobs(g.value).filter(o=>k.value.trim()===""||k.value.trim().length===0?!0:o.name.toLowerCase().includes(k.value.toLowerCase())).filter((o,i)=>i>=(r.value-1)*10&&i<r.value*10)}async function p(o){o.orderKey===g.value.orderKey&&(o.orderBy=g.value.orderBy==="asc"?"desc":"asc"),g.value={...g.value,...o},await n()}async function B(o){k.value=o,await n()}async function E(){g.value={isDeleted:!1},await n()}async function w(){r.value++,await n()}async function N(){r.value--,await n()}async function I(o){o<1&&(o=1),r.value=o,await n()}n();async function H(){const o=document.getElementById("job-name"),i=document.getElementById("job-price");if(!o||!i){u("Please fill all the fields",{type:"error"});return}if(!o.value||!i.value){u("Please fill all the fields",{type:"error"});return}if(isNaN(Number(i.value))){u("Please insert a valid number",{type:"error"});return}const D={costPerHour:Number(i.value),name:o.value,id:0,isDeleted:!1};try{A.createUserJob(D)}catch(P){u(P.message,{type:"error"});return}document.getElementById("close-modal-"+e).click(),u("Job created",{type:"success"}),await I(1),await n()}async function l(o){try{A.deleteUserJob(o),await n(),u("Job deleted",{type:"success"})}catch(i){u("Error deleting job: "+i.message,{type:"error"})}}async function b(){var L,K,M;const o=document.getElementById("job-name-edit"),i=document.getElementById("job-price-edit"),D=document.getElementById("job-delete-edit"),S=D?D.checked:!0,P={id:((L=h.value)==null?void 0:L.id)||0,...h.value,name:o.value||((K=h.value)==null?void 0:K.name)||"default",costPerHour:Number(i.value)||((M=h.value)==null?void 0:M.costPerHour)||0,isDeleted:!S};if(!P.id){u("Error editing job: Job id not found",{type:"error"});return}try{A.updateUserJob(P.id,P),await n(),u("Job edited",{type:"success"})}catch(V){u("Error editing job: "+V.message,{type:"error"});return}document.getElementById("close-modal-"+e+"-edit").click()}return{modalId:e,userService:A,document,deleteJob:l,jobs:y,createJob:H,nextPage:w,previousPage:N,setPage:I,page:r,setQuery:p,resetQuery:E,query:g,setSearch:B,setEditJob:f,editedJob:h,editJob:b}}},c=y=>(R("data-v-feeeb2a0"),y=y(),O(),y),X={class:"intro"},Y={class:"bg-image h-100"},Z={class:"mask d-flex align-items-center h-100"},$={class:"container"},ee={class:"row justify-content-center"},te={class:"col-12"},oe={class:"d-flex align-items-center mb-3 gap-3 justify-content-between"},ae=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[t("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})],-1)),re={class:"card shadow-2-strong"},se={class:"card-body"},le={class:"table-responsive"},ne={class:"table table-borderless mb-0"},de={scope:"col"},ie=c(()=>t("p",{class:"p-0 m-0"},"Name",-1)),ce=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),ue=[ce],me={scope:"col"},be=c(()=>t("p",{class:"p-0 m-0"},"Price(€)/Hour",-1)),_e=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),ge=[_e],ve={scope:"col"},ye=c(()=>t("p",{class:"p-0 m-0"},"Id",-1)),he=c(()=>t("path",{"fill-rule":"evenodd",d:"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4"},null,-1)),fe=[he],pe={key:0,scope:"col"},we=["onClick"],Ce=["data-bs-target"],xe=["data-bs-target"],ke=["data-bs-target"],Be={key:0,class:"custom-row"},Ie=["onClick"],Pe=c(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-x text-white",viewBox:"0 0 16 16"},[t("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"})],-1)),Je=[Pe],je={class:"container d-flex pt-4 justify-content-between"},Ae=c(()=>t("span",{"aria-hidden":"true"},"«",-1)),De=c(()=>t("span",{"aria-hidden":"true"},"»",-1)),Ee=c(()=>t("div",null,null,-1));function Ne(y,r,k,e,g,h){const f=_("CInputGroupText"),n=_("CFormInput"),p=_("CInputGroup"),B=_("CButton"),E=_("CButtonGroup"),w=_("CPaginationItem"),N=_("CPagination"),I=_("app-modal"),H=_("CFormCheck");return d(),v("section",X,[t("div",Y,[t("div",Z,[t("main",$,[t("div",ee,[t("div",te,[t("div",oe,[a(p,{class:"w-25"},{default:s(()=>[a(f,null,{default:s(()=>[ae]),_:1}),a(n,{onChange:r[0]||(r[0]=l=>e.setSearch(l.target.value)),placeholder:"Search","aria-label":"Search","aria-describedby":"search"})]),_:1}),a(E,{role:"group","aria-label":"Basic example"},{default:s(()=>[a(B,{color:"primary",active:!e.query.isDeleted,onClick:r[1]||(r[1]=l=>e.setQuery({isDeleted:!1}))},{default:s(()=>[m("Active")]),_:1},8,["active"]),a(B,{color:"primary",active:e.query.isDeleted,onClick:r[2]||(r[2]=l=>e.setQuery({isDeleted:!0}))},{default:s(()=>[m("Deleted")]),_:1},8,["active"])]),_:1})]),t("div",re,[t("div",se,[t("div",le,[a(T,{name:"fade"},{default:s(()=>[t("table",ne,[t("thead",null,[t("tr",null,[t("th",de,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:r[3]||(r[3]=l=>e.setQuery({orderKey:"name",orderBy:"asc"}))},[ie,(d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:q({transform:e.query.orderKey==="name"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},ue,4))])]),t("th",me,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:r[4]||(r[4]=l=>e.setQuery({orderKey:"quantity",orderBy:"asc"}))},[be,(d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:q({transform:e.query.orderKey==="pricePerHour"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},ge,4))])]),t("th",ve,[t("div",{class:"d-flex align-items-center gap-2",style:{cursor:"pointer"},onClick:r[5]||(r[5]=l=>e.setQuery({orderKey:"id",orderBy:"asc"}))},[ye,(d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-short",viewBox:"0 0 16 16",style:q({transform:e.query.orderKey==="id"&&e.query.orderBy==="asc"?"rotate(180deg)":"rotate(0deg)"})},fe,4))])]),e.query.isDeleted?C("",!0):(d(),v("th",pe,"Delete"))])]),t("tbody",null,[(d(!0),v(U,null,z(e.jobs,l=>(d(),v("tr",{key:l.id,onClick:b=>e.setEditJob(l),class:"table-row custom-row-parent"},[t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},x(l.name),9,Ce),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},x(l.costPerHour.toFixed(2))+"€ ",9,xe),t("td",{class:"custom-row","data-bs-toggle":"modal","data-bs-target":"#"+e.modalId+"-edit"},x(l.id),9,ke),l.isDeleted?C("",!0):(d(),v("td",Be,[t("button",{type:"button",class:"btn btn-danger btn-sm px-3",onClick:b=>e.deleteJob(l.id)},Je,8,Ie)]))],8,we))),128))])])]),_:1})])])])])]),t("div",je,[a(N,{"aria-label":"Page navigation example"},{default:s(()=>[e.page>1?(d(),j(w,{key:0,"aria-label":"Previous",style:{cursor:"pointer"},onClick:e.previousPage},{default:s(()=>[Ae]),_:1},8,["onClick"])):C("",!0),a(w,{active:""},{default:s(()=>[m(x(e.page),1)]),_:1}),e.jobs.length==10?(d(),j(w,{key:1,onClick:r[6]||(r[6]=l=>e.setPage(e.page+1)),style:{cursor:"pointer"}},{default:s(()=>[m(x(e.page+1),1)]),_:1})):C("",!0),e.jobs.length==10?(d(),j(w,{key:2,onClick:r[7]||(r[7]=l=>e.setPage(e.page+2)),style:{cursor:"pointer"}},{default:s(()=>[m(x(e.page+2),1)]),_:1})):C("",!0),e.jobs.length==10?(d(),j(w,{key:3,"aria-label":"Next",onClick:e.nextPage,style:{cursor:"pointer"}},{default:s(()=>[De]),_:1},8,["onClick"])):C("",!0)]),_:1}),a(B,{"data-bs-toggle":"modal",type:"button","data-bs-target":"#"+e.modalId,color:"primary"},{default:s(()=>[m(" Add new job ")]),_:1},8,["data-bs-target"]),a(I,{targetId:e.modalId,title:"Add Job",description:"Create a new job",saveAction:e.createJob},{default:s(()=>[a(p,{class:"mb-3"},{default:s(()=>[a(f,null,{default:s(()=>[m("Name")]),_:1}),a(n,{id:"job-name",placeholder:"Name","aria-label":"Name","aria-describedby":"basic-addon1"})]),_:1}),a(p,{class:"mb-3"},{default:s(()=>[a(f,null,{default:s(()=>[m("Price/Hour(€)")]),_:1}),a(n,{id:"job-price",placeholder:"Price/Hour","aria-label":"Price/Hour","aria-describedby":"basic-addon1"})]),_:1})]),_:1},8,["targetId","saveAction"])]),Ee])]),a(I,{targetId:e.modalId+"-edit",title:"Job",description:"Edit job",saveAction:e.editJob},{default:s(()=>{var l;return[a(p,{class:"mb-3"},{default:s(()=>{var b,o;return[a(f,null,{default:s(()=>[m(" Name ")]),_:1}),a(n,{id:"job-name-edit",placeholder:(b=e.editedJob)==null?void 0:b.name,"aria-label":"Name","aria-describedby":"basic-addon1",value:(o=e.editedJob)==null?void 0:o.name},null,8,["placeholder","value"])]}),_:1}),a(p,{class:"mb-3"},{default:s(()=>{var b,o;return[a(f,null,{default:s(()=>[m("Price/Hour(€)")]),_:1}),a(n,{id:"job-price-edit",placeholder:(b=e.editedJob)==null?void 0:b.costPerHour,"aria-label":"Price","aria-describedby":"basic-addon1",value:(o=e.editedJob)==null?void 0:o.costPerHour},null,8,["placeholder","value"])]}),_:1}),(l=e.editedJob)!=null&&l.isDeleted?(d(),j(H,{key:0,id:"job-delete-edit",label:"Reactivate job"})):C("",!0)]}),_:1},8,["targetId","saveAction"])])])}const Me=G(W,[["render",Ne],["__scopeId","data-v-feeeb2a0"]]);export{Me as default};
